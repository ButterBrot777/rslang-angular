<app-header></app-header>

<div class="main-container">
	<form [formGroup]="form" (ngSubmit)="submit()" class="card">
		<h2>Registration</h2>

		<!--  <div class="alert alert-danger"-->
		<!--       *ngIf="auth.error$ | async as error"-->
		<!--  >{{error}}</div>-->

		<div class="alert alert-danger" *ngIf="message">{{ message }}</div>

		<div [ngClass]="{ invalid: form.get('email').touched && form.get('email').invalid }" class="form-control">
			<label for="email">Email</label>
			<input id="email" type="email" formControlName="email" />
		</div>

		<div *ngIf="form.get('email').touched && form.get('email').invalid" class="validation">
			<small *ngIf="form.get('email').errors.required"> Email is required </small>
			<small *ngIf="form.get('email').errors.email"> Put email in format email@email.com </small>
		</div>

		<div [ngClass]="{ invalid: form.get('password').touched && form.get('password').invalid }" class="form-control">
			<label for="password">Password</label>
			<input id="password" type="password" formControlName="password" />
		</div>

		<div *ngIf="form.get('password').touched && form.get('password').invalid" class="validation">
			<small *ngIf="form.get('password').errors.required"> Password is required </small>
			<small *ngIf="form.get('password').errors.minlength">
				Password length must be
				{{ form.get("password").errors.minlength.requiredLength }} or more symbols. Now it is
				{{ form.get("password").errors.minlength.actualLength }}
			</small>
		</div>

		<div [ngClass]="{ invalid: form.get('confirmPassword').touched && form.get('confirmPassword').invalid }" class="form-control">
			<label for="password">Repeate password</label>
			<input id="confirmPassword" type="password" formControlName="confirmPassword" />
		</div>

		<div *ngIf="form.get('confirmPassword').touched && form.get('confirmPassword').invalid" class="validation">
			<small *ngIf="form.get('confirmPassword').errors.required"> Password confirmation is required </small>
			<small *ngIf="!form.get('confirmPassword').errors.passwordConfirmation"> Password must be the same </small>
		</div>

		<button type="submit" class="btn btn-primary" [disabled]="form.invalid || submitted">Register</button>
	</form>
</div>

<app-footer></app-footer>
